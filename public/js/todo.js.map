{"version":3,"sources":["todo.js"],"names":["todos","todoListEl","$","taskFieldEl","submitBtnEl","click","saveTodo","then","val","getTodos","renderTodoList","catch","alert","err","console","error","Promise","request","data","resolve","empty","length","todoList","map","id","todo","task","checked","delEl","done","join","append","reject","updateTodoStatus","mounted","document","ready","on","e","target","attr","is","preventDefault"],"mappings":"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","file":"todo.js","sourcesContent":["let todos = [];\nconst todoListEl = $('#todo-list');\nconst taskFieldEl = $('#task');\nconst submitBtnEl = $('#submit');\n\nsubmitBtnEl.click(() => {\n  saveTodo().then(() => {\n    taskFieldEl.val('');\n\n    getTodos().then(() => {\n      renderTodoList();\n    });\n  }).catch(err => {\n    alert(err);\n\n    console.error(err);\n  });\n});\n\nfunction getTodos() {\n  return new Promise(resolve => {\n    request('/api/todos').then(data => {\n      todos = data;\n\n      resolve();\n    }).catch(err => {\n      console.error(err);\n\n      todos = [];\n\n      resolve();\n    });\n  })\n}\n\nfunction renderTodoList() {\n  return new Promise(resolve => {\n    todoListEl.empty();\n\n    if (todos.length > 0) {\n      const todoList = todos.map(todo => {\n        let { id, task } = todo;\n        let checked = '';\n        const delEl = `<a href=\"#\" style=\"text-decoration:none; color:red;\" title=\"Delete\">\n          [<i class=\"glyphicon glyphicon-trash\"></i>]\n        </a>`;\n\n        if (todo.done) {\n          task = `<del>${todo.task}</del>`;\n          checked = ' checked';\n        }\n\n        return `<div class=\"checkbox\">\n          <label>\n            <input type=\"checkbox\"${checked} todo-id=\"${id}\" class=\"todo-checkbox\"> ${task} ${delEl}\n          </label>\n        </div>`;\n      }).join('');\n\n      todoListEl.append(todoList);\n      todoListEl.append(`<button class=\"btn btn-danger\">Delete Selected</button>`);\n    } else {\n      todoListEl.append('You have no todo for now.');\n    }\n\n    resolve();\n  });\n}\n\nfunction saveTodo() {\n  const task = taskFieldEl.val();\n\n  return new Promise((resolve, reject) => {\n    if (task.length < 1) {\n      reject(`Todo shouldn't empty.`);\n\n      return;\n    }\n\n    request('/api/todos', 'POST', { task }).then(data => {\n      resolve(data);\n    }).catch(err => {\n      reject(err);\n    });\n  });\n}\n\nfunction updateTodoStatus(id, done) {\n  return new Promise((resolve, reject) => {\n    request(`/api/todos/${id}`, 'PUT', { done }).then(data => {\n      resolve(data);\n    }).catch(err => {\n      reject(err);\n    });\n  });\n}\n\nfunction mounted() {\n  renderTodoList().then(() => {\n    getTodos().then(() => {\n      renderTodoList();\n    });\n  });\n}\n\n$(document).ready(() => {\n  $('#todo-list').on('click', '.todo-checkbox', e => {\n    const todo = $(e.target);\n    const id = todo.attr('todo-id');\n    const done = todo.is(':checked');\n\n    updateTodoStatus(id, done).then(() => {\n      e.preventDefault();\n\n      getTodos().then(() => {\n        renderTodoList();\n      });\n    }).catch(err => {\n      alert(err);\n\n      console.error(err);\n    });\n  });\n\n  mounted();\n});\n"]}